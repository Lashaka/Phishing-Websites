"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_text-ex-3415a8"],{57260(t,e,i){i.d(e,{P:()=>n});class n{constructor(t,e){this.file=t,this.directory=e,this.state="pending",this.id=null,this.href=null,this.name=null,this.percent=0}static traverse(t,e){return function(t,e){return e&&function(t){return t.items&&Array.from(t.items).some((t=>{let e=t.webkitGetAsEntry&&t.webkitGetAsEntry();return e&&e.isDirectory}))}(t)?a("",function(t){return Array.from(t.items).map((t=>t.webkitGetAsEntry())).filter((t=>null!=t))}(t)):Promise.resolve(s(Array.from(t.files||[])).map((t=>new n(t))))}(t,e)}static from(t){let e=[];for(let i of t)if(i instanceof File)e.push(new n(i));else{if(!(i instanceof n))throw Error("Unexpected type");e.push(i)}return e}get fullPath(){return this.directory?`${this.directory}/${this.file.name}`:this.file.name}isImage(){return["image/gif","image/png","image/jpg","image/jpeg","image/svg+xml"].indexOf(this.file.type)>-1}isVideo(){return["video/mp4","video/quicktime"].indexOf(this.file.type)>-1}saving(t){if("pending"!==this.state&&"saving"!==this.state)throw Error(`Unexpected transition from ${this.state} to saving`);this.state="saving",this.percent=t}saved(t){var e,i,n;if("pending"!==this.state&&"saving"!==this.state)throw Error(`Unexpected transition from ${this.state} to saved`);this.state="saved",this.id=null!==(e=null==t?void 0:t.id)&&void 0!==e?e:null,this.href=null!==(i=null==t?void 0:t.href)&&void 0!==i?i:null,this.name=null!==(n=null==t?void 0:t.name)&&void 0!==n?n:null}isPending(){return"pending"===this.state}isSaving(){return"saving"===this.state}isSaved(){return"saved"===this.state}}function s(t){return Array.from(t).filter((t=>!t.name.startsWith(".")))}function r(t){return new Promise((function(e,i){t.file(e,i)}))}function o(t){return new Promise((function(e,i){let n=[],s=t.createReader(),r=()=>{s.readEntries((t=>{t.length>0?(n.push(...t),r()):e(n)}),i)};r()}))}async function a(t,e){let i=[];for(let l of s(e))if(l.isDirectory)i.push(...await a(l.fullPath,await o(l)));else{let e=await r(l);i.push(new n(e,t))}return i}class l extends HTMLElement{connectedCallback(){this.addEventListener("dragenter",u),this.addEventListener("dragover",u),this.addEventListener("dragleave",c),this.addEventListener("drop",m),this.addEventListener("paste",f),this.addEventListener("change",v)}disconnectedCallback(){this.removeEventListener("dragenter",u),this.removeEventListener("dragover",u),this.removeEventListener("dragleave",c),this.removeEventListener("drop",m),this.removeEventListener("paste",f),this.removeEventListener("change",v)}get directory(){return this.hasAttribute("directory")}set directory(t){t?this.setAttribute("directory",""):this.removeAttribute("directory")}async attach(t){let e=t instanceof DataTransfer?await n.traverse(t,this.directory):n.from(t);this.dispatchEvent(new CustomEvent("file-attachment-accept",{bubbles:!0,cancelable:!0,detail:{attachments:e}}))&&e.length&&this.dispatchEvent(new CustomEvent("file-attachment-accepted",{bubbles:!0,detail:{attachments:e}}))}}function h(t){return Array.from(t.types).indexOf("Files")>=0}let d=null;function u(t){let e=t.currentTarget;d&&clearTimeout(d),d=window.setTimeout((()=>e.removeAttribute("hover")),200);let i=t.dataTransfer;i&&h(i)&&(i.dropEffect="copy",e.setAttribute("hover",""),t.preventDefault())}function c(t){t.dataTransfer&&(t.dataTransfer.dropEffect="none"),t.currentTarget.removeAttribute("hover"),t.stopPropagation(),t.preventDefault()}function m(t){let e=t.currentTarget;if(!(e instanceof l))return;e.removeAttribute("hover");let i=t.dataTransfer;i&&h(i)&&(e.attach(i),t.stopPropagation(),t.preventDefault())}let p=/^image\/(gif|png|jpeg)$/;function f(t){if(!t.clipboardData||!t.clipboardData.items)return;let e=t.currentTarget;if(!(e instanceof l))return;let i=function(t){for(let e of t)if("file"===e.kind&&p.test(e.type))return e.getAsFile();return null}(t.clipboardData.items);if(!i)return;let n=[i];e.attach(n),t.preventDefault()}function v(t){let e=t.currentTarget;if(!(e instanceof l))return;let i=t.target;if(!(i instanceof HTMLInputElement))return;let n=e.getAttribute("input");if(n&&i.id!==n)return;let s=i.files;s&&0!==s.length&&(e.attach(s),i.value="")}window.customElements.get("file-attachment")||(window.FileAttachmentElement=l,window.customElements.define("file-attachment",l))},57852(t,e,i){var n=i(10160);let s=/\s|\(|\[/;function r(t,e,i,{multiWord:n,lookBackIndex:r,lastMatchPosition:o}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let a=t.lastIndexOf(e,i-1);if(-1===a||a<r)return;if(n){if(null!=o){if(o===a)return;a=o-e.length}if(" "===t[a+1]&&i>=a+e.length+1)return;if(t.lastIndexOf("\n",i-1)>a)return;if(t.lastIndexOf(".",i-1)>a)return}else{if(t.lastIndexOf(" ",i-1)>a)return}let l=t[a-1];return!l||s.test(l)?{text:t.substring(a+e.length,i),position:a+e.length}:void 0}let o=["position:absolute;","overflow:auto;","word-wrap:break-word;","top:0px;","left:-9999px;"],a=["box-sizing","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","min-height","padding-bottom","padding-left","padding-right","padding-top","border-bottom","border-left","border-right","border-top","text-decoration","text-indent","text-transform","width","word-spacing"],l=new WeakMap,h=new WeakMap;class d{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var i,s;if(this.input!==document.activeElement&&this.input!==(null===(s=null===(i=document.activeElement)||void 0===i?void 0:i.shadowRoot)||void 0===s?void 0:s.activeElement))return;this.deactivate(),this.menu=e,e.id||(e.id=`text-expander-${Math.floor(1e5*Math.random()).toString()}`),this.expander.append(e),this.combobox=new n.Z(this.input,e);let{top:r,left:h}=function(t,e=t.selectionEnd){let{mirror:i,marker:n}=function(t,e){let i=t.nodeName.toLowerCase();if("textarea"!==i&&"input"!==i)throw Error("expected textField to a textarea or input");let n=l.get(t);if(n&&n.parentElement===t.parentElement)n.innerHTML="";else{n=document.createElement("div"),l.set(t,n);let e=window.getComputedStyle(t),s=o.slice(0);"textarea"===i?s.push("white-space:pre-wrap;"):s.push("white-space:nowrap;");for(let t=0,i=a.length;t<i;t++){let i=a[t];s.push(`${i}:${e.getPropertyValue(i)};`)}n.style.cssText=s.join(" ")}let s,r,h=document.createElement("span");if(h.style.cssText="position: absolute;",h.innerHTML="&nbsp;","number"==typeof e){let i=t.value.substring(0,e);i&&(s=document.createTextNode(i)),(i=t.value.substring(e))&&(r=document.createTextNode(i))}else{let e=t.value;e&&(s=document.createTextNode(e))}if(s&&n.appendChild(s),n.appendChild(h),r&&n.appendChild(r),!n.parentElement){if(!t.parentElement)throw Error("textField must have a parentElement to mirror");t.parentElement.insertBefore(n,t)}return n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft,{mirror:n,marker:h}}(t,e),s=i.getBoundingClientRect(),r=n.getBoundingClientRect();return setTimeout((()=>{i.remove()}),5e3),{top:r.top-s.top,left:r.left-s.left}}(this.input,t.position);e.style.top=`${r}px`,e.style.left=`${h}px`,this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1)}deactivate(){let t=this.menu;return!!t&&!!this.combobox&&(this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){let e=t;if(!(e instanceof HTMLElement&&this.combobox))return;let i=this.match;if(!i)return;let n=this.input.value.substring(0,i.position-i.key.length),s=this.input.value.substring(i.position+i.text.length),r={item:e,key:i.key,value:null};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:r}))||!r.value)return;let o=`${r.value} `;this.input.value=n+o+s;let a=n.length+o.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=a,this.input.selectionEnd=a,this.lookBackIndex=a,this.match=null,this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){this.interactingWithList?this.interactingWithList=!1:this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted)return void(this.justPasted=!1);let t=this.findMatch();if(t){this.match=t;let e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){let t=this.input.selectionEnd||0,e=this.input.value;for(let{key:i,multiWord:n}of(t<=this.lookBackIndex&&(this.lookBackIndex=t-1),this.expander.keys)){let s=r(e,i,t,{multiWord:n,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(s)return{text:s.text,key:i,position:s.position}}}async notifyProviders(t){let e=[];if(this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:t=>e.push(t),text:t.text,key:t.key}})))return(await Promise.all(e)).filter((t=>t.matched)).map((t=>t.fragment))[0]}onMousedown(){this.interactingWithList=!0}onKeydown(t){"Escape"===t.key&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class u extends HTMLElement{get keys(){let t=this.getAttribute("keys"),e=t?t.split(" "):[],i=this.getAttribute("multiword"),n=i?i.split(" "):[],s=0===n.length&&this.hasAttribute("multiword");return e.map((t=>({key:t,multiWord:s||n.includes(t)})))}connectedCallback(){let t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;let e=new d(this,t);h.set(this,e)}disconnectedCallback(){let t=h.get(this);t&&(t.destroy(),h.delete(this))}dismiss(){let t=h.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=u,window.customElements.define("text-expander",u))}}]);